"""JaCoCo source."""

from ..meta.source import Source
from ..parameters import access_parameters

from .jenkins import jenkins_access_parameters


ALL_JACOCO_METRICS = ["source_up_to_dateness", "uncovered_branches", "uncovered_lines"]

JACOCO = Source(
    name="JaCoCo",
    description="JaCoCo is an open-source tool for measuring and reporting Java code coverage.",
    url="https://www.eclemma.org/jacoco/",
    parameters=access_parameters(ALL_JACOCO_METRICS, source_type="JaCoCo report", source_type_format="XML"),
)

JACOCO_JENKINS_PLUGIN = Source(
    name="JaCoCo Jenkins plugin",
    description="A Jenkins job with a JaCoCo coverage report produced by the JaCoCo Jenkins plugin.",
    url="https://plugins.jenkins.io/jacoco",
    parameters=jenkins_access_parameters(
        ALL_JACOCO_METRICS,
        kwargs=dict(
            url=dict(
                help="URL to a Jenkins job with a coverage report generated by the JaCoCo plugin. For example, "
                "'https://jenkins.example.org/job/jacoco' or https://jenkins.example.org/job/jacoco/job/master' in "
                "case of a pipeline job."
            )
        ),
    ),
)
